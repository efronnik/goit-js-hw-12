{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst GALLERY_LINK = 'gallery-link';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nasync function fetchImages(q) {\n  const searchParams = new URLSearchParams({\n    key: '42404284-d1db8811507a6ab98b0e3f497',\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safeSearch: true,\n  });\n\n  const PARAMS = `?${searchParams}`;\n  const url = BASE_URL + PARAMS;\n\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: `Error fetching images: ${error}`,\n      position: 'topRight',\n    });\n    throw error;\n  }\n}\n\nexport { fetchImages, GALLERY_LINK };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImages, GALLERY_LINK } from './pixabay-api';\n\nexport function createGallery({\n  largeImageURL,\n  tags,\n  webformatURL,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n    <a href=\"${largeImageURL}\" class=\"${GALLERY_LINK}\">\n      <figure>\n        <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\">\n        <figcaption class=\"gallery__figcaption\">\n          <div class=\"image-item\">Likes <span class=\"image-elem\">${likes}</span></div>\n          <div class=\"image-item\">Views <span class=\"image-elem\">${views}</span></div>\n          <div class=\"image-item\">Comments <span class=\"image-elem\">${comments}</span></div>\n          <div class=\"image-item\">Downloads <span class=\"image-elem\">${downloads}</span></div>\n        </figcaption>\n      </figure>\n    </a>\n  `;\n}\n","import iziToast from 'izitoast';\nimport axios from 'axios';\nimport { fetchImages, GALLERY_LINK } from './js/pixabay-api';\nimport { createGallery } from './js/render-functions';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryContainer = document.querySelector('#gallery');\nconst searchForm = document.querySelector('.search-form');\nconst loaderContainer = document.querySelector('.loader');\nconst loadMoreBtn = document.getElementById('loadMoreBtn');\nconst endMessage = document.getElementById('endMessage');\nlet currentPage = 1;\nlet queryInput = '';\n\nfunction clearGallery() {\n  galleryContainer.innerHTML = '';\n}\n\nfunction hideLoadMoreButton() {\n  loadMoreBtn.style.display = 'none';\n}\n\nfunction showLoadMoreButton() {\n  loadMoreBtn.style.display = 'block';\n}\n\nfunction hideEndMessage() {\n  endMessage.style.display = 'none';\n}\n\nfunction showEndMessage() {\n  endMessage.style.display = 'block';\n}\n\nfunction showLoader() {\n  loaderContainer.style.display = 'inline-block';\n}\n\nfunction hideLoader() {\n  loaderContainer.style.display = 'none';\n}\n\nfunction showErrorMessage(message) {\n  iziToast.info({\n    title: 'Information',\n    message: message,\n    position: 'topRight',\n  });\n}\n\nsearchForm.addEventListener('submit', async function (event) {\n  event.preventDefault();\n  queryInput = event.target.elements.query.value;\n\n  if (queryInput === '') {\n    return;\n  }\n\n  currentPage = 1;\n\n  clearGallery();\n  hideEndMessage();\n  showLoader();\n\n  try {\n    const { data } = await axios.get(\n      `https://pixabay.com/api/?key=42404284-d1db8811507a6ab98b0e3f497&q=${queryInput}&image_type=photo&orientation=horizontal&safeSearch=true&page=${currentPage}&per_page=15`\n    );\n\n    const { hits, totalHits } = data;\n\n    if (hits.length > 0) {\n      const galleryHTML = hits.map(createGallery).join('');\n      galleryContainer.innerHTML = galleryHTML;\n      const lightbox = new SimpleLightbox(`.${GALLERY_LINK}`);\n      lightbox.refresh();\n      showLoadMoreButton();\n\n      window.scrollBy({\n        top: window.innerHeight,\n        behavior: 'smooth',\n      });\n    } else {\n      showErrorMessage(\n        `Sorry, there are no images matching your search query. Please try again!`\n      );\n      hideLoadMoreButton();\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: `Error fetching images: ${error.message}`,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n    searchForm.reset();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async function () {\n  showLoader();\n\n  try {\n    const { data } = await axios.get(\n      `https://pixabay.com/api/?key=42404284-d1db8811507a6ab98b0e3f497&q=${queryInput}&image_type=photo&orientation=horizontal&safeSearch=true&page=${currentPage}&per_page=15`\n    );\n\n    const { hits, totalHits } = data;\n\n    if (hits.length > 0) {\n      const galleryHTML = hits.map(createGallery).join('');\n      galleryContainer.innerHTML += galleryHTML;\n      const lightbox = new SimpleLightbox(`.${GALLERY_LINK}`);\n      lightbox.refresh();\n      currentPage++;\n\n      window.scrollBy({\n        top: window.innerHeight,\n        behavior: 'smooth',\n      });\n\n      if (currentPage * 15 >= totalHits) {\n        showEndMessage();\n        hideLoadMoreButton();\n        showErrorMessage(`Sorry, there are no more images to load.`);\n      }\n    } else {\n      showErrorMessage(`Sorry, there are no more images to load.`);\n      hideLoadMoreButton();\n    }\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    iziToast.error({\n      title: 'Error',\n      message: `Error fetching images: ${error.message}`,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["GALLERY_LINK","createGallery","largeImageURL","tags","webformatURL","likes","views","comments","downloads","galleryContainer","searchForm","loaderContainer","loadMoreBtn","endMessage","currentPage","queryInput","clearGallery","hideLoadMoreButton","showLoadMoreButton","hideEndMessage","showEndMessage","showLoader","hideLoader","showErrorMessage","message","iziToast","event","data","axios","hits","totalHits","galleryHTML","SimpleLightbox","error"],"mappings":"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"}